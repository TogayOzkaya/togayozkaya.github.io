<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Erişilebilir İzmir Metro</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>

    <div class="container">
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="brand"><i class="fas fa-metro"></i><h2>Erişilebilir İzmir</h2></div>
                <p>Engelsiz ulaşım haritası</p>
            </div>
            <div class="search-ticker-area">
                <div class="search-box"><i class="fas fa-search"></i><input type="text" id="station-search" placeholder="İstasyon ara..."></div>
                <div class="news-ticker"><i class="fas fa-broadcast-tower"></i><div class="ticker-wrapper"><div class="ticker-content" id="ticker-text">Sistem aktif. Veriler yükleniyor...</div></div></div>
            </div>
            <div class="list-header"><h3>İstasyonlar</h3><span id="result-count" class="count-badge">24</span></div>
            <div class="results-list" id="station-list"></div>
        </aside>

        <main class="map-container">
            <button id="sidebar-toggle" class="btn-toggle"><i class="fas fa-bars"></i></button>
            <div class="profile-card" onclick="handleProfileClick()">
                <div class="profile-info"><span class="user-name" id="top-user-name">Misafir</span><span class="user-points" id="top-user-desc">Giriş Yapın</span></div>
                <div class="profile-img"><img src="https://cdn-icons-png.flaticon.com/512/149/149071.png" id="top-user-img"></div>
            </div>
            <div id="map"></div>
            <div class="map-legend">
                <h4>Durumlar</h4>
                <ul><li><span class="legend-dot status-ok"></span> Sorun Yok</li><li><span class="legend-dot status-err"></span> Arıza Var</li><li><span class="legend-dot status-pending"></span> Doğrulama Bekliyor</li></ul>
            </div>
        </main>
    </div>

    <div id="loginModal" class="modal">
        <div class="modal-content login-modal-design">
            <div class="lm-left"><div class="lm-welcome-text"><h2>Topluluğa Katıl</h2><p>İzmir'i herkes için erişilebilir kıl.</p></div></div>
            <div class="lm-right">
                <span class="close-icon-dark" onclick="closeLoginModal()">&times;</span>
                <h3>Giriş Yap</h3><p class="lm-subtext">Katkı sağlamak için oturum açmalısın.</p>
                <button class="btn-google-login" onclick="performLogin()"><i class="fab fa-google"></i> Google ile Devam Et</button>
            </div>
        </div>
    </div>

    <div id="profileModal" class="modal">
        <div class="modal-content profile-modal-design">
            <div class="pm-header">
                <span class="close-icon-light" onclick="closeProfileModal()">&times;</span>
                <div class="pm-user-info"><img src="" class="pm-avatar" id="modal-avatar"><div class="pm-text"><h2 id="modal-username">Kullanıcı</h2><p>Seviye <span id="modal-level">1</span></p></div></div>
            </div>
            <div class="pm-body">
                <div class="pm-stats-row">
                    <div class="pm-stat-box"><h3><span id="stat-points">0</span></h3><p>Puan</p></div>
                    <div class="pm-stat-box"><h3><span id="stat-reports">0</span></h3><p>Rapor</p></div>
                    <div class="pm-stat-box"><h3><span id="stat-badges">0</span></h3><p>Rozet</p></div>
                </div>
                <div class="pm-progress-area">
                    <div class="pm-prog-labels"><span>İlerleme</span><span id="xp-text">0/100</span></div>
                    <div class="pm-prog-bg"><div class="pm-prog-fill" id="xp-bar" style="width: 0%;"></div></div>
                </div>
                <div class="pm-badges-grid">
                    <div class="pm-badge-card" id="badge-first-login"><h5>Başlangıç</h5><i class="fas fa-check-circle badge-status"></i></div>
                    <div class="pm-badge-card locked" id="badge-first-report"><h5>İlk Rapor</h5><i class="fas fa-lock badge-status"></i></div>
                    <div class="pm-badge-card locked" id="badge-verifier"><h5>Müfettiş</h5><i class="fas fa-lock badge-status"></i></div>
                </div>
                
                <div class="pm-footer-action">
                    <button class="btn-logout" onclick="resetData()">
                        <i class="fas fa-sign-out-alt"></i> Çıkış Yap ve Verileri Sıfırla
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div id="reportModal" class="modal">
        <div class="modal-content report-modal-design">
            <div class="modal-header"><h2 id="modal-station-name">İstasyon</h2><span class="close-btn" onclick="closeReportModal()">&times;</span></div>
            <div id="alternative-route-box" class="suggestion-box" style="display:none;"><i class="fas fa-info-circle"></i> <span id="suggestion-text"></span></div>
            <div class="modal-body">
                <div class="visual-container"><div id="mini-map"></div><div class="mini-map-overlay">Haritadan seçim yapın</div></div>
                <div class="form-container">
                    <div id="selected-zone-info" class="selection-alert">Seçim Yapılmadı</div>
                    <form id="reportForm">
                        <div class="issue-types-grid">
                            <label class="issue-box"><input type="radio" name="issue" value="elevator" checked> Asansör</label>
                            <label class="issue-box"><input type="radio" name="issue" value="ramp"> Rampa</label>
                        </div>
                        <div class="file-upload-wrapper" onclick="document.getElementById('file-input').click()">
                            <input type="file" id="file-input" hidden><span id="file-label"><i class="fas fa-camera"></i> Fotoğraf Ekle (+20 Puan)</span>
                        </div>
                        <textarea placeholder="Açıklama..."></textarea>
                        <button type="submit" class="btn-submit" id="btn-submit-report" disabled>Gönder</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <div id="verifyModal" class="modal">
        <div class="modal-content verify-modal-design">
            <div class="vm-header"><h3>Durum Doğrulama</h3><span class="close-icon-dark" onclick="closeVerifyModal()">&times;</span></div>
            <div class="vm-body">
                <h2 id="verify-station-name">İstasyon</h2><p>Bu istasyondaki güncel durum nedir?</p>
                <div class="vm-actions">
                    <button class="btn-verify-action btn-still-broken" onclick="submitVerification(false)"><strong>Sorun Devam Ediyor</strong> <span>+15 Puan</span></button>
                    <button class="btn-verify-action btn-fixed" onclick="submitVerification(true)"><strong>Sorun Çözülmüş</strong> <span>+30 Puan</span></button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="script.js"></script>
</body>
</html>
